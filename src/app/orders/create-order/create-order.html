<div class="container mt-4">
  <div class="row">
    <!-- ## LEFT COLUMN: ITEM ENTRY FORM ## -->
    <div class="col-lg-5 mb-4">
      <!-- Add h-100 to make this card stretch -->
      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">Add Item to Order</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="orderItemForm" (ngSubmit)="addItemToOrder()">
            <!-- Barcode Input -->
            <div class="mb-3">
              <label for="productId" class="form-label">Product ID</label>
              <input
                type="number"
                id="productId"
                class="form-control"
                formControlName="productId"
                placeholder="Enter product database ID"
                autofocus
              />
            </div>

            <!-- Quantity Input -->
            <div class="mb-3">
              <label for="quantity" class="form-label">Quantity</label>
              <input
                type="number"
                id="quantity"
                class="form-control"
                formControlName="quantity"
              />
            </div>
            
             <!-- Selling Price Input -->
            <div class="mb-3">
              <label for="sellingPrice" class="form-label">Selling Price (MRP)</label>
              <input
                type="number"
                id="sellingPrice"
                class="form-control"
                formControlName="sellingPrice"
                placeholder="Enter selling price"
              />
            </div>

            <!-- Add Item Button -->
            <div class="d-grid">
              <button class="btn btn-primary" type="submit" [disabled]="orderItemForm.invalid">
                Add Item
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- ## RIGHT COLUMN: CURRENT ORDER ITEMS ## -->
    <div class="col-lg-7 mb-4">
      <!-- Add h-100 and flexbox classes to manage internal layout -->
      <div class="card shadow-sm h-100 d-flex flex-column">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">Current Order ({{ currentOrderItems.length }} items)</h5>
          <strong *ngIf="currentOrderItems.length > 0">Total: {{ getTotal() | currency:'INR' }}</strong>
        </div>
        <!-- Add flexbox classes to make the body grow -->
        <div class="card-body d-flex flex-column flex-grow-1">
          <!-- Add flex-grow-1 to make the table area fill the space -->
          <div class="table-responsive flex-grow-1" style="overflow-y: auto;">
            <table class="table table-striped table-sm">
              <thead class="table-dark">
                <tr>
                  <th>Product ID</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th class="text-end">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="currentOrderItems.length === 0">
                  <td colspan="4" class="text-center text-muted fst-italic py-4">No items added yet</td>
                </tr>
                <tr *ngFor="let item of currentOrderItems; let i = index">
                  <td>{{ item.productId }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>{{ item.sellingPrice | currency:'INR' }}</td>
                  <td class="text-end">
                    <button class="btn btn-sm btn-outline-danger" (click)="removeItem(i)">
                      Remove
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Place Order Button -->
          <div class="d-grid mt-3" *ngIf="currentOrderItems.length > 0">
            <button class="btn btn-success btn-lg" (click)="placeOrder()">
              Place Order
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

